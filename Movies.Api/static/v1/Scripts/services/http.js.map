{"version":3,"sources":["http.es6.js"],"names":["ajaxOptions","$ajaxPromise","$","ajax","resultPromise","can","Deferred","done","proxy","fail","error","errorResponse","JSON","parse","errorModel","errorStatus","reject","e","undefined","promise","channel","publish","window","_proxy","getInterceptor","object","propertyName","attr","_data","_computedAttrs","setInterceptor","value","updatePostfixAddInterceptor","original","updatePostfixSubtractInterceptor","postal"],"mappings":";;;;;;;mBAMe,UAAUA,WAAV,EAAuB;AACrC,MAAIC,eAAeC,iBAAEC,IAAF,CAAOH,WAAP,CAAnB;AACA,MAAII,gBAAgBC,cAAIC,QAAJ,EAApB;AACAL,eACEM,IADF,CACOF,cAAIG,KAAJ,uBAAUJ,aAAV,cAAiCA,aAAjC,CADP,EAEEK,IAFF,CAEO,UAAUC,KAAV,EAAiB;AACtB,OAAI;AACH,QAAIC,gBAAgBC,KAAKC,KAAL,uBAAWH,KAAX,kBAApB;AACA,QAAII,aAAa,EAAEC,mCAAaL,KAAb,WAAF,EAA6BA,OAAOC,aAApC,EAAjB;AACAP,kBAAcY,MAAd,CAAqBF,UAArB;AACA,IAJD,CAKA,OAAOG,CAAP,EAAU;AACT,QAAI,iDAAuBC,SAAvB,IAAoC,iDAAuB,IAA/D,EAAqE;AACpE,SAAIJ,cAAa,EAAEC,mCAAaL,KAAb,WAAF,EAA6BA,6BAAOA,KAAP,iBAA7B,EAAjB;AACAN,mBAAcY,MAAd,CAAqBF,WAArB;AACA,KAHD,MAIK;AACJ,SAAIA,eAAa,EAAEC,mCAAaL,KAAb,WAAF,EAAjB;AACAN,mBAAcY,MAAd,CAAqBF,YAArB;AACA;AACD;AACD,GAlBF;AAmBA,SAAOV,cAAce,OAAd,GAAwBV,IAAxB,CAA6B,UAAUC,KAAV,EAAiB;AACpDU,WAAQC,OAAR,CAAgB,sCAAgBX,KAAhB,gBAAhB,EAAmD;AAClDV,iBAAaA,WADqC;AAElDU,WAAOA;AAF2C,IAAnD;AAIA,GALM,CAAP;AAMA,E;;;;;;;;;;;;;;AAlCA,KAAI,CAACY,OAAOC,MAAZ,EAAoB;AACjBD,SAAOC,MAAP,GAAgB;AACZC,mBAAgB,wBAAUC,MAAV,EAAkBC,YAAlB,EAAgC;AAC5C,QAAID,OAAOE,IAAP,KAAiBF,OAAOG,KAAP,IAAgBH,OAAOG,KAAP,CAAaF,YAAb,MAA+BR,SAAhD,IAA+DO,OAAOI,cAAP,IAAyBJ,OAAOI,cAAP,CAAsBH,YAAtB,CAAxG,CAAJ,EAAmJ;AAC/I,YAAOD,OAAOE,IAAP,CAAYD,YAAZ,CAAP;AACH,KACD,OAAOD,OAAOC,YAAP,CAAP;AACH,IANW,EAOZI,gBAAgB,wBAAUL,MAAV,EAAkBC,YAAlB,EAAgCK,KAAhC,EAAuC;AACnD,QAAIN,OAAOE,IAAX,EAAiB;AACb,YAAOF,OAAOE,IAAP,CAAYD,YAAZ,EAA0BK,KAA1B,CAAP;AACH,KAFD,MAGK;AACD,YAAON,OAAOC,YAAP,IAAuBK,KAA9B;AACH;AACJ,IAdW,EAeZC,6BAA6B,qCAAUP,MAAV,EAAkBC,YAAlB,EAAgC;AACzD,QAAIO,WAAW,KAAKT,cAAL,CAAoBC,MAApB,EAA4BC,YAA5B,CAAf,CACA,KAAKI,cAAL,CAAoBL,MAApB,EAA4BC,YAA5B,EAA0CO,WAAW,CAArD,EACA,OAAOA,QAAP;AACH,IAnBW,EAoBZC,kCAAkC,0CAAUT,MAAV,EAAkBC,YAAlB,EAAgCK,KAAhC,EAAuC;AACrE,QAAIE,WAAW,KAAKT,cAAL,CAAoBC,MAApB,EAA4BC,YAA5B,CAAf,CACA,KAAKI,cAAL,CAAoBL,MAApB,EAA4BC,YAA5B,EAA0CK,QAAQ,CAAlD,EACA,OAAOE,QAAP;AACH,IAxBW,EAAhB;AA0BH;;AAvBD,KAAIb,UAAUe,iBAAOf,OAAP,CAAe,MAAf,CAAd","file":"http.js","sourcesContent":["ï»¿import $ from 'jquery';\r\nimport can from 'can.full';\r\nimport postal from 'postal';\r\n\r\nlet channel = postal.channel(\"ajax\");\r\n\r\nexport default function (ajaxOptions) {\r\n\tlet $ajaxPromise = $.ajax(ajaxOptions);\r\n\tlet resultPromise = can.Deferred();\r\n\t$ajaxPromise\r\n\t\t.done(can.proxy(resultPromise.resolve, resultPromise))\r\n\t\t.fail(function (error) {\r\n\t\t\ttry {\r\n\t\t\t\tlet errorResponse = JSON.parse(error.responseText);\r\n\t\t\t\tlet errorModel = { errorStatus: error.status, error: errorResponse };\r\n\t\t\t\tresultPromise.reject(errorModel);\r\n\t\t\t}\r\n\t\t\tcatch (e) {\r\n\t\t\t\tif (error.responseText !== undefined && error.responseText !== null) {\r\n\t\t\t\t\tlet errorModel = { errorStatus: error.status, error: error.responseText };\r\n\t\t\t\t\tresultPromise.reject(errorModel);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tlet errorModel = { errorStatus: error.status };\r\n\t\t\t\t\tresultPromise.reject(errorModel);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\treturn resultPromise.promise().fail(function (error) {\r\n\t\tchannel.publish(\"http.error.\" + error.errorStatus, {\r\n\t\t\tajaxOptions: ajaxOptions,\r\n\t\t\terror: error\r\n\t\t});\r\n\t});\r\n}\r\n"]}